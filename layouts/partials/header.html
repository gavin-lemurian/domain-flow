<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    {{ .Hugo.Generator }}
    {{ partial "meta.html" . }}
    {{ partial "favicon.html" . }}
    {{ .Scratch.Add "title" "" }}{{ if isset .Site.Data.titles .Title }}{{ .Scratch.Set "title" (index .Site.Data.titles .Title).title }}{{ else }}{{ .Scratch.Set "title" .Title}}{{end}}
    <title>{{ .Scratch.Get "title" }}</title>
    <link href="{{ .Site.BaseURL }}/css/nucleus.css" rel="stylesheet">
    <link href="{{ .Site.BaseURL }}/css/font-awesome.min.css" rel="stylesheet">
    <link href="{{ .Site.BaseURL }}/css/hybrid.css" rel="stylesheet">
    <link href="{{ .Site.BaseURL }}/css/featherlight.min.css" rel="stylesheet">
    <link href="{{ .Site.BaseURL }}/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="{{ .Site.BaseURL }}/css/horsey.css" rel="stylesheet">
    <link href="{{ .Site.BaseURL }}/css/theme.css" rel="stylesheet">
    <link href="{{ .Site.BaseURL }}/css/hugo-theme.css" rel="stylesheet">
    <script src="{{ .Site.BaseURL }}/js/jquery-2.x.min.js"></script>
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    {{ partial "style.html" . }}
  </head>
  <body class="" data-url="{{ .RelPermalink }}">
    {{ partial "menu.html" . }}
        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable">

            <div id="top-bar">
              {{ if and .IsPage .Site.Params.editURL }}
                {{ $File := .File }}
                {{ $Site := .Site }}
                {{with $File.Path }}
              <div id="top-github-link">
                  <a class="github-link" href="{{ $Site.Params.editURL }}{{ replace $File.Dir "\\" "/" }}{{ $File.LogicalName }}" target="blank">
                    <i class="fa fa-code-fork"></i>
                    Edit this page
                  </a>
              </div>
                {{ end }}
              {{ end }}
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                {{ if and (not .Params.chapter) (.Params.toc) }}
                <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>
                {{ end }}
                {{ $type := .Type }}
                {{ $relLink := .RelPermalink }}
                {{ range $name , $value := .Site.Sections }}
                  {{ if eq $name $type }}
                    {{ $first := (index $value 0).Page }}
                    {{ if ne $first.RelPermalink $relLink }}
                <a href="{{ $first.RelPermalink }}" itemprop="url"><span itemprop="title">{{ $first.Title }}</span></a> <i class="fa fa-angle-right"></i>
                    {{ end }}
                  {{ end }}
                {{ end }}
                {{ with .Title }}<span itemprop="title"> {{ . }}</span>{{ end }}
              </div>
              {{ if .Params.toc }}
                  {{ partial "toc.html" . }}
              {{ end }}

            </div>
            {{ if .Params.chapter }}
              <div id="chapter">
            {{ end }}
    	        <div id="body-inner">
                {{ if not .Params.chapter }}
                <h1>{{.Title}}</h1>
                {{ end }}



        <script src="{{ .Site.BaseURL }}js/build/three.js"></script>
        <script src="{{ .Site.BaseURL }}js/controls/OrbitControls.js"></script>
        <script src="{{ .Site.BaseURL }}js/Detector.js"></script>
        <script src="{{ .Site.BaseURL }}js/libs/numeric-1.2.6.js"></script>
        <script src="{{ .Site.BaseURL }}js/dfa/indexspace.js"></script>

        <script type="x-shader/x-vertex" id="vertexshader">

			attribute float size;
			attribute vec3 customColor;

			varying vec3 vColor;

			void main() {

				vColor = customColor;

				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

				gl_PointSize = size * ( 300.0 / -mvPosition.z );

				gl_Position = projectionMatrix * mvPosition;

			}

		</script>

        <script type="x-shader/x-fragment" id="fragmentshader">

			uniform vec3 color;
			uniform sampler2D texture;

			varying vec3 vColor;

			void main() {

				gl_FragColor = vec4( color * vColor, 1.0 );

				gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );

				if ( gl_FragColor.a < ALPHATEST ) discard;

			}

		</script>

        <script>
            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

            var scenes = [];
            var views = [];
            var t, canvas, renderer;
            var PARTICLE_SIZE = 2;
            var clock = new THREE.Clock( true );

            window.onload = init;

            function init() {
                canvas = document.getElementById( 'c' );

                renderer = new THREE.WebGLRenderer( { canvas: canvas, antialias: true } );
                renderer.setClearColor( 0xffffff );
                renderer.setPixelRatio( window.devicePixelRatio );

                views.push( document.getElementById( 'index_space_view' ) );

                { // views[0] = index_space_view
                    var lattice0 = createIndexSpaceGeometry(20, 20, 20, 1, true);
                    var pointSize0 = PARTICLE_SIZE * 0.5;
                    var scene0 = createIndexSpaceScene( lattice0, pointSize0 );
                    scene0.userData.view = views[0];

                    // PerspectiveCamera ( fov, aspectRatio, near clipping plane, var clipping plane )
                    var camera0 = new THREE.PerspectiveCamera( 75, 1, 0.1, 1000 );
                    camera0.position.set( 0, 0, 25 );   // ( x = 0, y = 0, z = 25 )
                    scene0.userData.camera = camera0;

                    var controls0 = new THREE.OrbitControls( camera0, views[0] );
                    controls0.minDistance = 20;   // zoom can't zoom in further than z = 20
                    controls0.maxDistance = 500;   // zoom can't zoom out further than z = 500
                    scene0.userData.controls = controls0;

                    scenes.push( scene0 );
                }

                t = 0;
                animate();

            }

            function updateSize() {
                var width = canvas.clientWidth;
                var height = canvas.clientHeight;

                if ( canvas.width !== width || canvas.height != height ) {
                    renderer.setSize( width, height, false );
                }
            }

            function animate() {
                render();
                requestAnimationFrame( animate );
            }

            function render() {
                updateSize();

                // the ScissorTest machinery is needed to make the viewport clipping work properly.
                renderer.setClearColor( 0xffffff );
                renderer.setScissorTest( false );
                renderer.clear();

                renderer.setClearColor( 0x000000 );
                renderer.setScissorTest( true );

                scenes.forEach( function( scene ) {

                    var rect = scene.userData.view.getBoundingClientRect();
                    // check if it's off-screen. If so skip it
                    if ( rect.bottom < 0 || rect.top  > renderer.domElement.clientHeight ||
                        rect.right  < 0 || rect.left > renderer.domElement.clientWidth ) {
                        return;  // it's off-screen so skip the renderering
                    }

                    // set the viewport
                    var width  = rect.right - rect.left;
                    var height = rect.bottom - rect.top;
                    var left   = rect.left;
                    var bottom = renderer.domElement.clientHeight - rect.bottom;
                    renderer.setViewport( left, bottom, width, height );
                    renderer.setScissor( left, bottom, width, height );

                    renderer.render( scene, scene.userData.camera );

                    scene.children[0].geometry.verticesNeedUpdate = true;

                } );

                t = clock.getElapsedTime();
            }

        </script>